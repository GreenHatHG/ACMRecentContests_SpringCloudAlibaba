dist: xenial
language: java

jdk:
  - openjdk8

services:
  - docker

addons:
  apt:
    packages:
    - sshpass

cache:
  directories:
  - $HOME/.m2

install:
  - ssh-keyscan ${gatewayip} >> ~/.ssh/known_hosts

script:
  - docker login --username=$registryu registry.cn-hongkong.aliyuncs.com --password=$registryp

deploy:
- provider: script
  script:
    bash start.sh $gatewayip $gatewaypwd acm-dependencies acm-commons-controller acm-commons-utils
    bash docker.sh
  on:
    branch: master

branches:
  only:
    - master

notifications:
  email: false

env:
  global:
  - GH_REF=https://github.com/GreenHatHG/ACMRecentContests_SpringCloudAlibaba.git
